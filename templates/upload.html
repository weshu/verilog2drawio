<div id="upload" class="panel">
    <h4>Upload Verilog File</h4>
    <form id="upload-form" method="POST" enctype="multipart/form-data">
        <div class="drop-zone">
            Drop Verilog file here or click to upload
            <input type="file" name="file" id="file-input" hidden onchange="handleUpload()" />
        </div>
        <button type="button" class="btn btn-primary mt-3" onclick="triggerFileInput(); handleUpload()">Or Click to Open an Upload Dialog</button>
    </form>
    <div class="upload-status">
        {% if filename %}
        <p>Upload File: {{ filename }}</p>
        {% else %}
        <p>No file uploaded yet.</p>
        {% endif %}
    </div>
    <button class="btn btn-success" onclick="parseAndContinue()">
        <span>Parse and Continue</span>
    </button>
</div>

<script>
    function parseAndContinue() {
        const filename = new URLSearchParams(window.location.search).get('filename');
        if (!filename) {
            alert('Please upload a Verilog file first.');
            return;
        }
        showPanel('port-config');
    }
</script>